<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Promise Tracker</title>
</head>
<body>
  <table border="1">
    <thead>
      <tr>
        <th>Promise</th>
        <th>Time Taken (Seconds)</th>
      </tr>
    </thead>
    <tbody id="output">
      <tr>
        <td colspan="2">Loading...</td>
      </tr>
    </tbody>
  </table>

  <script>
    // Create a promise that resolves after 1-3 seconds and returns time taken
    function createPromise(index) {
      const delay = Math.random() * 2000 + 1000; // 1000ms to 3000ms
      return new Promise(resolve => {
        const start = performance.now();
        setTimeout(() => {
          const end = performance.now();
          const timeTaken = ((end - start) / 1000).toFixed(3);
          resolve({ name: `Promise ${index}`, time: parseFloat(timeTaken) });
        }, delay);
      });
    }

    // Create 3 promises
    const promises = [1, 2, 3].map(i => createPromise(i));

    // Wait for all promises to resolve
    Promise.all(promises).then(results => {
      const tbody = document.getElementById("output");
      tbody.innerHTML = ''; // Remove loading row

      // Add rows for each promise result
      results.forEach(result => {
        const row = document.createElement("tr");
        const td1 = document.createElement("td");
        const td2 = document.createElement("td");

        td1.textContent = result.name;
        td2.textContent = result.time.toFixed(3);

        row.appendChild(td1);
        row.appendChild(td2);
        tbody.appendChild(row);
      });

      // Calculate the maximum time among the promises
      const maxTime = results.reduce((max, r) => Math.max(max, r.time), 0).toFixed(3);

      // Add Total row with max time
      const totalRow = document.createElement("tr");
      const totalLabel = document.createElement("td");
      const totalValue = document.createElement("td");

      totalLabel.textContent = "Total";
      totalValue.textContent = maxTime;

      totalRow.appendChild(totalLabel);
      totalRow.appendChild(totalValue);
      tbody.appendChild(totalRow);
    });
  </script>
</body>
</html>
